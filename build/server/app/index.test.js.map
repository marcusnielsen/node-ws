{"version":3,"sources":["../../../server/app/index.test.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;oBAEI,MAAM;;;;mBACH,QAAQ;;;;kBACN,IAAI;;;;AAE1B,IAAI,GAAG,YAAA,CAAC;;AAER,uBAAK,OAAO,EAAE,UAAC,CAAC,EAAK;AACjB,WAAO,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC;;AAExB,qBAAQ,IAAI,CAAC,UAAU,cAAc,EAAE;AACnC,WAAG,GAAG,cAAc,CAAC;AACrB,SAAC,CAAC,GAAG,EAAE,CAAC;KACX,CAAC,CAAC;CACN,CAAC,CAAC;;AAEH,uBAAK,KAAK,EAAE,UAAC,CAAC,EAAK;AACf,KAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;AAEV,QAAM,EAAE,GAAG,oBAAc,iBAAiB,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;AAE/D,MAAE,CAAC,gBAAgB,CAAC,MAAM,EAAE,YAAW;AACnC,UAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AACrB,SAAC,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;KAC1C,CAAC,CAAC;;AAEH,MAAE,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAS,OAAO,EAAE;AAC7C,SAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;AACtC,UAAE,CAAC,KAAK,EAAE,CAAC;KACd,CAAC,CAAC;;AAEH,MAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAM;AAC/B,SAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;KAC/B,CAAC,CAAC;CACN,CAAC,CAAC;;AAEH,uBAAK,UAAU,EAAE,UAAC,CAAC,EAAK;AACpB,OAAG,CAAC,KAAK,EAAE,CAAC;AACZ,KAAC,CAAC,GAAG,EAAE,CAAC;CACX,CAAC,CAAC","file":"index.test.js","sourcesContent":["'use strict';\n\nimport test from 'tape';\nimport appInit from '../app';\nimport WebSocket from 'ws';\n\nlet app;\n\ntest('setup', (t) => {\n    process.env.PORT = 6000;\n\n    appInit.init(function (initializedApp) {\n        app = initializedApp;\n        t.end();\n    });\n});\n\ntest('app', (t) => {\n    t.plan(3);\n\n    const ws = new WebSocket('ws://localhost:' + process.env.PORT);\n\n    ws.addEventListener('open', function() {\n        ws.send('something');\n        t.pass('Websocket connection opened.');\n    });\n\n    ws.addEventListener('message', function(message) {\n        t.pass('Websocket message recieved.');\n        ws.close();\n    });\n\n    ws.addEventListener('close', () => {\n        t.pass('Websocket closed.');\n    });\n});\n\ntest('teardown', (t) => {\n    app.close();\n    t.end();\n});\n"]}