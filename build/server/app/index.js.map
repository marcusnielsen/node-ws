{"version":3,"sources":["../../../server/app/index.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;AAEb,IAAI,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;AAC3C,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC3B,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,IAAI,GAAG,GAAG,OAAO,EAAE,CAAC;AACpB,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE/B,SAAS,IAAI,CAAC,IAAI,EAAE;AAChB,OAAG,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;AACvB,OAAG,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,UAAO,CAAC,SAAS,GAAG,eAAe,CAAC,CAAC,CAAC;;AAEhE,QAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;AACpC,UAAM,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;AAEhC,QAAI,GAAG,GAAG,IAAI,eAAe,CAAC,EAAC,MAAM,EAAE,MAAM,EAAC,CAAC,CAAC;AAChD,OAAG,CAAC,EAAE,CAAC,YAAY,EAAE,UAAS,EAAE,EAAE;AAC9B,YAAI,EAAE,GAAG,WAAW,CAAC,YAAW;AAC5B,cAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,EAAE,YAAW,qBAAuB,CAAC,CAAC;SACtF,EAAE,GAAG,CAAC,CAAC;AACR,eAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;AACvC,UAAE,CAAC,EAAE,CAAC,OAAO,EAAE,YAAW;AACtB,mBAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;AACxC,yBAAa,CAAC,EAAE,CAAC,CAAC;SACrB,CAAC,CAAC;KACN,CAAC,CAAC;;AAEH,QAAG,IAAI,EAAE;AACL,YAAI,CAAC,MAAM,CAAC,CAAC;KAChB;CACJ;;qBAEc;AACX,QAAI,EAAE,IAAI;CACb","file":"index.js","sourcesContent":["'use strict';\n\nlet WebSocketServer = require('ws').Server;\nlet http = require('http');\nlet express = require('express');\nlet app = express();\nlet morgan = require('morgan');\n\nfunction init(done) {\n    app.use(morgan('dev'));\n    app.use('/client', express.static(__dirname + '/../../client'));\n\n    var server = http.createServer(app);\n    server.listen(process.env.PORT);\n\n    var wss = new WebSocketServer({server: server});\n    wss.on('connection', function(ws) {\n        var id = setInterval(function() {\n            ws.send(JSON.stringify(process.memoryUsage()), function() { /* ignore errors */ });\n        }, 100);\n        console.log('started client interval');\n        ws.on('close', function() {\n            console.log('stopping client interval');\n            clearInterval(id);\n        });\n    });\n\n    if(done) {\n        done(server);\n    }\n}\n\nexport default {\n    init: init\n};"]}